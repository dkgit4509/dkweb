<!-- âœ‚ï¸ Snippet from movies.html -->
<!-- ...head + header stays same -->

<!-- Filters -->
<div class="filters">
  <input type="text" id="searchInput" placeholder="ğŸ” Search by name" />
  <select id="genreFilter"><option value="">ğŸ­ Genre</option></select>
  <select id="platformFilter"><option value="">ğŸ“º Platform</option></select>
  <select id="languageFilter"><option value="">ğŸ—£ï¸ Language</option></select>
  <select id="awardFilter"><option value="">ğŸ† Awards</option></select>
</div>

<!-- Grid -->
<div id="movieGrid"></div>

<script>
  const SHEET_URL = "https://api.sheetbest.com/sheets/7e4985fe-430a-47f0-b328-394bd58af9c7";
  let allMovies = [];

  fetch(SHEET_URL)
    .then(res => res.json())
    .then(data => {
      allMovies = data.filter(row => row.Name);
      populateFilters(allMovies);
      renderMovies(allMovies);
    });

  function populateFilters(data) {
    const genreSet = new Set();
    const platformSet = new Set();
    const langSet = new Set();
    const awardsSet = new Set();

    data.forEach(item => {
      if (item.Genre) genreSet.add(item.Genre.trim());
      if (item['Platform(s)']) item['Platform(s)'].split(",").forEach(p => platformSet.add(p.trim()));
      if (item.Language) langSet.add(item.Language.trim());
      if (item.Awards) awardsSet.add(item.Awards.trim());
    });

    const fill = (id, set) => {
      const el = document.getElementById(id);
      set.forEach(v => {
        const opt = document.createElement('option');
        opt.value = v;
        opt.textContent = v;
        el.appendChild(opt);
      });
    };

    fill("genreFilter", genreSet);
    fill("platformFilter", platformSet);
    fill("languageFilter", langSet);
    fill("awardFilter", awardsSet);

    document.getElementById("searchInput").addEventListener("input", filterMovies);
    ["genreFilter", "platformFilter", "languageFilter", "awardFilter"].forEach(id =>
      document.getElementById(id).addEventListener("change", filterMovies)
    );
  }

  function filterMovies() {
    const genre = document.getElementById("genreFilter").value;
    const platform = document.getElementById("platformFilter").value;
    const language = document.getElementById("languageFilter").value;
    const awards = document.getElementById("awardFilter").value;
    const search = document.getElementById("searchInput").value.toLowerCase();

    const filtered = allMovies.filter(movie => {
      const genreMatch = !genre || movie.Genre?.includes(genre);
      const platformMatch = !platform || movie['Platform(s)']?.includes(platform);
      const langMatch = !language || movie.Language?.includes(language);
      const awardMatch = !awards || movie.Awards?.includes(awards);
      const searchMatch = !search || movie.Name?.toLowerCase().includes(search);

      return genreMatch && platformMatch && langMatch && awardMatch && searchMatch;
    });

    renderMovies(filtered);
  }

  function renderMovies(list) {
    const grid = document.getElementById("movieGrid");
    grid.innerHTML = "";

    list.forEach(movie => {
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <h3>ğŸ¬ ${movie.Name}</h3>
        <p>ğŸ­ <strong>Genre:</strong> ${movie.Genre}</p>
        <p>ğŸ“º <strong>Platform:</strong> ${movie['Platform(s)']}</p>
        <p>ğŸ—£ï¸ <strong>Language:</strong> ${movie.Language} (${movie['Origin Language']})</p>
        <p>ğŸ† <strong>Awards:</strong> ${movie.Awards}</p>
        <p>ğŸ¬ <strong>Director:</strong> ${movie.Director} (${movie.Year})</p>
        <p class="rating">â­ DKcloud Rating: ${movie['DKcloud Rating'] || 'N/A'}</p>
      `;
      grid.appendChild(card);
    });
  }
</script>
