<script>
  const SHEET_URL = "https://api.sheetbest.com/sheets/c66a0da1-d347-44f8-adc7-dc02c8627799";
  let allChannels = [];

  fetch(SHEET_URL)
    .then(res => res.json())
    .then(data => {
      allChannels = data.filter(item => item.Name && item.Category);
      populateCategories(allChannels);
      renderChannels(allChannels);
    });

  function populateCategories(data) {
    const tabContainer = document.getElementById('categoryTabs');
    const categories = [...new Set(data.map(item => item.Category.trim()))];

    categories.forEach(cat => {
      const btn = document.createElement("div");
      btn.className = "tab";
      btn.textContent = cat;
      btn.onclick = () => {
        document.querySelectorAll('.tab').forEach(el => el.classList.remove('active'));
        btn.classList.add('active');
        renderChannels(allChannels.filter(c => c.Category.trim() === cat));
      };
      tabContainer.appendChild(btn);
    });
  }

  function renderChannels(list) {
    const container = document.getElementById("channelGrid");
    container.innerHTML = "";

    list.forEach(item => {
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <img src="${item.Image || 'https://via.placeholder.com/260x140'}" alt="${item.Name}" />
        <h3>${item.Name}</h3>
        <p>${item.Description || ''}</p>
      `;
      container.appendChild(card);
    });
  }
</script>
